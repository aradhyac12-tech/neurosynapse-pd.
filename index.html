<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>NeuroSynapsePD Clinical Assessment Suite v2.1</title>
    
    <!-- Icons & Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- MediaPipe CDN (assessment.js uses these) -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Safety: ensure only active view is visible even if CSS is missing */
        .view { display: none; }
        .view.active { display: block; }
    </style>
</head>
<body>

<!-- Splash Screen -->
<div class="splash-screen" id="splashScreen" aria-label="Splash">
    <div class="splash-content">
        <div class="splash-logo">üß†</div>
        <h1 class="splash-title">NeuroSynapsePD</h1>
        <p class="splash-subtitle">Advanced Parkinson's Disease<br>Clinical Assessment Suite v2.1</p>
        <div class="splash-developer">
            <i class="fas fa-code"></i>
            Created by Aradhya Chavan
        </div>
        <div class="splash-progress">
            <div class="splash-progress-bar" id="splashProgress"></div>
        </div>
    </div>
</div>

<!-- Navbar -->
<nav class="navbar">
    <div class="nav-brand">
        <button class="btn btn-outline" id="menuToggle" type="button" aria-label="Menu">
            <i class="fas fa-bars"></i>
        </button>
        <div class="nav-title-group">
            <div class="nav-title">NeuroSynapsePD</div>
            <div class="nav-version">Clinical Suite v2.1</div>
        </div>
    </div>
    <div class="nav-right">
        <div class="language-selector" id="topLanguageSelector" title="Language">
            <span id="currentLanguageLabel">English</span>
            <i class="fas fa-globe"></i>
            <select id="topLanguageSelect" class="top-language-select" aria-label="Language">
                <option value="en">EN</option>
                <option value="hi">HI</option>
                <option value="ru">RU</option>
            </select>
        </div>
    </div>
</nav>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar" aria-label="Sidebar">
    <div class="sidebar-header">
        <div class="sidebar-title"><i class="fas fa-brain"></i> NeuroSynapsePD</div>
        <div class="sidebar-subtitle">Clinical Assessment Suite v2.1</div>
        <div class="sidebar-credits">
            <i class="fas fa-user-md"></i>
            Created by Aradhya Chavan
        </div>
        <button class="sidebar-back" id="sidebarBack" type="button" aria-label="Close sidebar">
            <i class="fas fa-arrow-left"></i>
        </button>
    </div>
    <div class="sidebar-scroll">
        <div class="nav-section">
            <div class="section-label"><i class="fas fa-brain"></i> Navigation</div>
            <div class="nav-item" data-view="dashboard">
                <i class="fas fa-chart-line nav-icon"></i>
                <span data-i18n="navdashboard">Clinical Dashboard</span>
                <div class="nav-badge">Home</div>
            </div>
            <div class="nav-item active" data-view="info">
                <i class="fas fa-info-circle nav-icon"></i>
                <span data-i18n="navinfo">PD Information</span>
                <div class="nav-badge">Guide</div>
            </div>
            <div class="nav-item" data-view="patient">
                <i class="fas fa-user-injured nav-icon"></i>
                <span data-i18n="navpatient">Patient Profile</span>
                <div class="nav-badge">Required</div>
            </div>
        </div>
        <div class="nav-section">
            <div class="section-label"><i class="fas fa-stethoscope"></i> Screening</div>
            <div class="nav-item disabled" data-view="voice">
                <i class="fas fa-microphone nav-icon"></i>
                <span data-i18n="navvoice">Speech 3.1</span>
            </div>
            <div class="nav-item disabled" data-view="gait">
                <i class="fas fa-walking nav-icon"></i>
                <span data-i18n="navgait">Gait 3.10-11</span>
            </div>
            <div class="nav-item disabled" data-view="facial">
                <i class="fas fa-smile nav-icon"></i>
                <span data-i18n="navfacial">Facial 3.2</span>
            </div>
            <div class="nav-item disabled" data-view="questions">
                <i class="fas fa-clipboard-list nav-icon"></i>
                <span data-i18n="navquestions">Question Assessment</span>
                <div class="nav-badge">New</div>
            </div>
            <div class="nav-item disabled" data-view="spiral">
                <i class="fas fa-pen-nib nav-icon"></i>
                <span data-i18n="navspiral">Spiral Tremor</span>
                <div class="nav-badge">New</div>
            </div>
            <div class="nav-item disabled" data-view="tremor">
                <i class="fas fa-wave-square nav-icon"></i>
                <span data-i18n="navtremor">Tremor 3.15-18</span>
            </div>
        </div>
        <div class="nav-section">
            <div class="section-label"><i class="fas fa-clipboard-check"></i> Results</div>
            <div class="nav-item disabled" data-view="results">
                <i class="fas fa-chart-bar nav-icon"></i>
                <span data-i18n="navresults">Screening Results</span>
            </div>
            <div class="nav-item disabled" data-view="report">
                <i class="fas fa-file-download nav-icon"></i>
                <span data-i18n="navreport">Download Summary</span>
            </div>
        </div>
    </div>
    <div class="sidebar-footer">
        <div class="settings-item">
            <div class="settings-label">
                <i class="fas fa-language"></i>
                <span data-i18n="labellanguage">Language</span>
            </div>
            <select class="form-control language-select" id="languageSelect" aria-label="Language">
                <option value="en">English</option>
                <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            </select>
        </div>
        <div class="settings-item">
            <div class="settings-label">
                <i class="fas fa-volume-up"></i>
                <span data-i18n="labelvoiceassistant">Voice Prompt</span>
            </div>
            <div class="clinical-toggle active" id="voiceToggle" role="switch" aria-checked="true"></div>
        </div>
        <div class="settings-item">
            <div class="settings-label">
                <i class="fas fa-hand-paper"></i>
                <span>Anti-Tremor UI</span>
            </div>
            <div class="clinical-toggle" id="antiTremorToggle" role="switch" aria-checked="false"></div>
        </div>
    </div>
</aside>

<!-- Main Content -->
<main class="main-content" id="mainContent">

<!-- DASHBOARD VIEW -->
<section class="view" id="dashboardView">
    <div class="clinical-card">
        <header class="test-header">
            <h2 data-i18n="dashtitle">Clinical Assessment Dashboard</h2>
            <p data-i18n="dashsubtitle">MDS-UPDRS Part III digital screening summary</p>
        </header>
        <div class="card-content">
            <div class="dashboard-grid">
                <div class="info-point">
                    <div class="point-icon">üë§</div>
                    <h3 data-i18n="dashpatienttitle">Patient Profile</h3>
                    <p data-i18n="dashpatientdesc">Complete demographic and contact details.</p>
                    <div class="status-badge status-pending" id="patientStatus" data-i18n="dashstatusrequired">Required</div>
                </div>
                <div class="info-point">
                    <div class="point-icon">üìã</div>
                    <h3 data-i18n="dashscreeningtitle">Screening Tests</h3>
                    <p data-i18n="dashscreeningdesc">Speech, tremor, gait and facial expression.</p>
                    <div class="status-badge status-pending" id="screeningStatus">0/6</div>
                </div>
                <div class="info-point">
                    <div class="point-icon">üìä</div>
                    <h3 data-i18n="dashreporttitle">Radar Summary</h3>
                    <p data-i18n="dashreportdesc">Downloadable radar chart with domain scores.</p>
                    <div class="status-badge status-pending" id="reportStatus" data-i18n="dashstatuslocked">Locked</div>
                </div>
            </div>
            <div class="test-instruction">
                <div class="instruction-text">
                    <strong>Assessment Hub</strong>
                    Open any screening test below. Tests unlock after Patient Profile is saved.
                </div>
            </div>
            <div class="dashboard-grid" id="dashboardTests">
                <div class="info-point">
                    <div class="point-icon">üé§</div>
                    <h3>Speech</h3>
                    <p>Record 3 trials "AAAAA".</p>
                    <button class="btn btn-outline btn-block" type="button" data-view="voice" disabled>Open</button>
                </div>
                <div class="info-point">
                    <div class="point-icon">üö∂</div>
                    <h3>Gait</h3>
                    <p>Pose tracking cadence.</p>
                    <button class="btn btn-outline btn-block" type="button" data-view="gait" disabled>Open</button>
                </div>
                <div class="info-point">
                    <div class="point-icon">üòä</div>
                    <h3>Facial</h3>
                    <p>Face mesh blink rate.</p>
                    <button class="btn btn-outline btn-block" type="button" data-view="facial" disabled>Open</button>
                </div>
                <div class="info-point">
                    <div class="point-icon">‚ùì</div>
                    <h3>Questions</h3>
                    <p>Short symptom context.</p>
                    <button class="btn btn-outline btn-block" type="button" data-view="questions" disabled>Open</button>
                </div>
                <div class="info-point">
                    <div class="point-icon">‚úçÔ∏è</div>
                    <h3>Spiral</h3>
                    <p>Draw & save spiral.</p>
                    <button class="btn btn-outline btn-block" type="button" data-view="spiral" disabled>Open</button>
                </div>
                <div class="info-point">
                    <div class="point-icon">üìà</div>
                    <h3>Tremor</h3>
                    <p>DeviceMotion capture.</p>
                    <button class="btn btn-outline btn-block" type="button" data-view="tremor" disabled>Open</button>
                </div>
            </div>
            <div class="action-section dashboard-actions">
                <div class="settings-item dash-lang">
                    <div class="settings-label">
                        <i class="fas fa-globe"></i>
                        <span data-i18n="labellanguage">Language</span>
                    </div>
                    <select class="form-control" id="dashboardLanguageSelect" aria-label="Language">
                        <option value="en">English</option>
                        <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    </select>
                </div>
                <button class="btn btn-primary btn-block" type="button" data-view="info">
                    <i class="fas fa-play-circle"></i>
                    <span data-i18n="dashstart">Begin Assessment Journey</span>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- INFO VIEW -->
<section class="view active" id="infoView">
    <div class="clinical-card">
        <div class="info-hero">
            <div class="info-icon">‚ÑπÔ∏è</div>
            <h2 data-i18n="infotitle">Parkinson's Disease Information</h2>
            <p data-i18n="infosubtitle">Clinical background and MDS-UPDRS Part III protocol</p>
        </div>
        <div class="card-content">
            <div class="info-points">
                <div class="info-point">
                    <div class="point-icon">üß†</div>
                    <h3 data-i18n="infopdtitle">What is Parkinson's?</h3>
                    <p data-i18n="infopdtext">Progressive neurodegenerative disorder with tremor, bradykinesia, rigidity and postural instability.</p>
                </div>
                <div class="info-point">
                    <div class="point-icon">üìä</div>
                    <h3 data-i18n="infoupdrstitle">MDS-UPDRS Part III</h3>
                    <p data-i18n="infoupdrstext">Motor examination with 18 items scored 0-4 (0 = normal, 4 = severe).</p>
                </div>
                <div class="info-point">
                    <div class="point-icon">üìà</div>
                    <h3 data-i18n="infobiomarkertitle">Digital Biomarkers</h3>
                    <p data-i18n="infobiomarkertext">Speech, tremor, gait and facial metrics captured as objective digital signatures.</p>
                </div>
            </div>
            <div class="test-instruction">
                <div class="instruction-text" data-i18n="infonote">
                    <strong>Clinical Note:</strong>
                    This is a research prototype‚Äîinterpret with clinician oversight.
                </div>
            </div>
            <div class="action-section">
                <button class="btn btn-primary btn-block" type="button" data-view="patient">
                    <i class="fas fa-arrow-right"></i>
                    <span data-i18n="infonext">Proceed to Patient Contact Information</span>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- PATIENT VIEW -->
<section class="view" id="patientView">
    <div class="clinical-card">
        <header class="test-header">
            <h2 data-i18n="patienttitle">Patient Demographic & Contact Information</h2>
            <p data-i18n="patientsubtitle">Required for documentation before screening</p>
        </header>
        <div class="card-content">
            <form id="patientForm" novalidate autocomplete="off">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="firstName">
                            <i class="fas fa-user"></i>
                            <span data-i18n="labelfirstname">First Name</span>
                        </label>
                        <input type="text" class="form-control" id="firstName" required>
                        <div class="error-message" id="firstNameError"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="lastName">
                            <i class="fas fa-user"></i>
                            <span data-i18n="labellastname">Last Name</span>
                        </label>
                        <input type="text" class="form-control" id="lastName" required>
                        <div class="error-message" id="lastNameError"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="dateOfBirth">
                            <i class="fas fa-birthday-cake"></i>
                            <span data-i18n="labeldob">Date of Birth</span>
                        </label>
                        <input type="date" class="form-control" id="dateOfBirth" required>
                        <div class="error-message" id="dobError"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="gender">
                            <i class="fas fa-venus-mars"></i>
                            <span data-i18n="labelgender">Gender</span>
                        </label>
                        <select class="form-control" id="gender" required>
                            <option value="" data-i18n="genderselect">Select Gender</option>
                            <option value="male" data-i18n="gendermale">Male</option>
                            <option value="female" data-i18n="genderfemale">Female</option>
                            <option value="other" data-i18n="genderother">Other</option>
                            <option value="prefer-not-to-say" data-i18n="genderna">Prefer not to say</option>
                        </select>
                        <div class="error-message" id="genderError"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="countryCode">
                            <i class="fas fa-globe"></i>
                            <span data-i18n="labelcountry">Country Code</span>
                        </label>
                        <select class="form-control" id="countryCode" required>
                            <option value="">Select Country Code</option>
                            <option value="+996">Kyrgyzstan +996</option>
                            <option value="+91">India +91</option>
                            <option value="+7">Russia +7</option>
                            <option value="+1">USA/Canada +1</option>
                            <option value="+44">United Kingdom +44</option>
                        </select>
                        <div class="error-message" id="countryError"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="phoneNumber">
                            <i class="fas fa-phone"></i>
                            <span data-i18n="labelphone">Phone Number</span>
                        </label>
                        <input type="tel" class="form-control" id="phoneNumber" placeholder="Digits only" required>
                        <div class="form-hint" data-i18n="hintphone">Enter digits only, without country code</div>
                        <div class="error-message" id="phoneError"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="email">
                            <i class="fas fa-envelope"></i>
                            <span data-i18n="labelemail">Email Address</span>
                        </label>
                        <input type="email" class="form-control" id="email" placeholder="patient@example.com" required>
                        <div class="error-message" id="emailError"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="medicalId">
                            <i class="fas fa-file-medical"></i>
                            <span data-i18n="labelmedicalid">Medical Record Number</span>
                        </label>
                        <input type="text" class="form-control" id="medicalId" placeholder="Optional - Hospital/Clinic ID">
                    </div>
                </div>
                <div class="test-instruction">
                    <div class="instruction-text" data-i18n="patientnote">
                        <strong>Clinical Documentation:</strong>
                        All required fields must be valid before screening tests unlock.
                    </div>
                </div>
                <div class="action-section">
                    <button class="btn btn-primary btn-block" type="button" id="savePatientBtn">
                        <i class="fas fa-save"></i>
                        <span data-i18n="patientsave">Save & Unlock Screening</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- VOICE VIEW -->
<section class="view" id="voiceView">
    <div class="clinical-card">
        <header class="test-header">
            <h2>Speech Screening UPDRS 3.1</h2>
            <p>Read the sentence clearly in a normal speaking voice. Voice guide will tell you what to do.</p>
        </header>
        <div class="card-content">
            <div class="precount-wrapper">
                <div class="precount-label"><span>Starting in</span></div>
                <div class="precount-timer" id="voicePreTimer">3</div>
            </div>
            <div class="voice-hero">
                <div class="voice-wave"></div>
                <div class="voice-sentence">
                    <span id="voiceSentence">Today is a good day to assess my speech and voice clarity.</span>
                </div>
                <div class="voice-wave voice-wave-bottom"></div>
            </div>
            <div class="voice-scope-wrap" aria-label="Voice waveform">
                <canvas id="voiceScope" width="900" height="220"></canvas>
            </div>
            <div class="timer-large" id="voiceMainTimer">00:08</div>
            <div class="voice-trials">
                <div class="trial-card">
                    <div class="trial-header">
                        <span>Trial 1</span>
                        <span id="voiceTrial1Status" class="trial-status">Pending</span>
                    </div>
                    <div class="trial-actions">
                        <button class="btn btn-primary btn-block" type="button" id="voiceTrial1Btn">
                            <i class="fas fa-microphone"></i> Record
                        </button>
                        <button class="btn btn-outline btn-block" type="button" id="voiceTrial1Play" disabled>
                            <i class="fas fa-play"></i> Play
                        </button>
                    </div>
                </div>
                <div class="trial-card">
                    <div class="trial-header">
                        <span>Trial 2</span>
                        <span id="voiceTrial2Status" class="trial-status">Pending</span>
                    </div>
                    <div class="trial-actions">
                        <button class="btn btn-primary btn-block" type="button" id="voiceTrial2Btn">
                            <i class="fas fa-microphone"></i> Record
                        </button>
                        <button class="btn btn-outline btn-block" type="button" id="voiceTrial2Play" disabled>
                            <i class="fas fa-play"></i> Play
                        </button>
                    </div>
                </div>
                <div class="trial-card">
                    <div class="trial-header">
                        <span>Trial 3</span>
                        <span id="voiceTrial3Status" class="trial-status">Pending</span>
                    </div>
                    <div class="trial-actions">
                        <button class="btn btn-primary btn-block" type="button" id="voiceTrial3Btn">
                            <i class="fas fa-microphone"></i> Record
                        </button>
                        <button class="btn btn-outline btn-block" type="button" id="voiceTrial3Play" disabled>
                            <i class="fas fa-play"></i> Play
                        </button>
                    </div>
                </div>
            </div>
            <div class="metrics-row">
                <div class="metric-card">
                    <div class="metric-label">Avg Jitter</div>
                    <div class="metric-value" id="jitterValue">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Avg Shimmer dB</div>
                    <div class="metric-value" id="shimmerValue">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Avg HNR dB</div>
                    <div class="metric-value" id="hnrValue">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Median Pitch Hz</div>
                    <div class="metric-value" id="pitchValue">--</div>
                </div>
            </div>
            <div class="action-section">
                <button class="btn btn-outline btn-block" type="button" id="saveVoiceResults" disabled>
                    <i class="fas fa-save"></i> Save Voice Screening
                </button>
            </div>
            <div class="test-nav-row">
                <button class="btn btn-outline" type="button" id="voiceRetakeBtn">
                    <i class="fas fa-rotate-left"></i> Retake
                </button>
                <button class="btn btn-primary" type="button" id="voiceNextBtn">
                    <i class="fas fa-arrow-right"></i> Next
                </button>
            </div>
        </div>
    </div>
</section>

<!-- GAIT VIEW -->
<section class="view" id="gaitView">
    <div class="clinical-card">
        <header class="test-header">
            <h2>Gait Screening UPDRS 3.10-11</h2>
            <p>Walk naturally in front of the camera. Pose skeleton will be drawn on screen.</p>
        </header>
        <div class="card-content">
            <div class="precount-wrapper">
                <div class="precount-label"><span>Starting in</span></div>
                <div class="precount-timer" id="gaitPreTimer">3</div>
            </div>
            <div class="video-container" id="gaitViz">
                <video id="gaitVideo" class="clinical-video" playsinline></video>
                <canvas id="gaitCanvas" class="clinical-canvas"></canvas>
            </div>
            <div class="timer-large" id="gaitMainTimer">00:15</div>
            <div class="action-section gait-actions">
                <button class="btn btn-primary" type="button" id="startGaitTest">
                    <i class="fas fa-walking"></i> Start Gait Capture
                </button>
                <button class="btn btn-outline" type="button" id="flipGaitCamera">
                    <i class="fas fa-sync-alt"></i> Flip Camera
                </button>
                <button class="btn btn-outline" type="button" id="gaitFullscreen">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
            <div class="metrics-grid compact">
                <div class="metric-card">
                    <div class="metric-label">Step Length cm</div>
                    <div class="metric-value" id="stepLength">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Cadence steps/min</div>
                    <div class="metric-value" id="stepCadence">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Balance Score</div>
                    <div class="metric-value" id="balanceScore">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Posture Score</div>
                    <div class="metric-value" id="postureScore">--</div>
                </div>
            </div>
            <div class="action-section">
                <button class="btn btn-outline btn-block" type="button" id="saveGaitResults" disabled>
                    <i class="fas fa-save"></i> Save Gait Screening
                </button>
            </div>
            <div class="test-nav-row">
                <button class="btn btn-outline" type="button" id="gaitRetakeBtn">
                    <i class="fas fa-rotate-left"></i> Retake
                </button>
                <button class="btn btn-primary" type="button" id="gaitNextBtn">
                    <i class="fas fa-arrow-right"></i> Next
                </button>
            </div>
        </div>
    </div>
</section>

<!-- FACIAL VIEW -->
<section class="view" id="facialView">
    <div class="clinical-card">
        <header class="test-header">
            <h2>Facial Screening UPDRS 3.2</h2>
            <p>Look at the camera with a neutral expression. Face mesh will highlight facial landmarks.</p>
        </header>
        <div class="card-content">
            <div class="precount-wrapper">
                <div class="precount-label"><span>Starting in</span></div>
                <div class="precount-timer" id="facePreTimer">3</div>
            </div>
            <div class="video-container" id="faceViz">
                <video id="faceVideo" class="clinical-video" playsinline></video>
                <canvas id="faceCanvas" class="clinical-canvas"></canvas>
            </div>
            <div class="timer-large" id="faceMainTimer">00:10</div>
            <div class="action-section face-actions">
                <button class="btn btn-primary" type="button" id="startFaceTest">
                    <i class="fas fa-smile"></i> Start Facial Capture
                </button>
                <button class="btn btn-outline" type="button" id="flipFaceCamera">
                    <i class="fas fa-sync-alt"></i> Flip Camera
                </button>
                <button class="btn btn-outline" type="button" id="faceFullscreen">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
            <div class="metrics-grid compact">
                <div class="metric-card">
                    <div class="metric-label">Symmetry Score</div>
                    <div class="metric-value" id="symmetryScore">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Blink Rate /min</div>
                    <div class="metric-value" id="blinkRate">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Expression Score</div>
                    <div class="metric-value" id="expressionScore">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Movement Score</div>
                    <div class="metric-value" id="movementScore">--</div>
                </div>
            </div>
            <div class="action-section">
                <button class="btn btn-outline btn-block" type="button" id="saveFaceResults" disabled>
                    <i class="fas fa-save"></i> Save Facial Screening
                </button>
            </div>
            <div class="test-nav-row">
                <button class="btn btn-outline" type="button" id="facialRetakeBtn">
                    <i class="fas fa-rotate-left"></i> Retake
                </button>
                <button class="btn btn-primary" type="button" id="facialNextBtn">
                    <i class="fas fa-arrow-right"></i> Next
                </button>
            </div>
        </div>
    </div>
</section>

<!-- QUESTIONS VIEW -->
<section class="view" id="questionsView">
    <div class="clinical-card">
        <header class="test-header">
            <h2 data-i18n="questiontitle">Question-Based Assessment</h2>
            <p data-i18n="questionsubtitle">Answer a short set of clinical questions to support screening context.</p>
        </header>
        <div class="card-content">
            <div class="question-grid" id="questionForm">
                <div class="q-card">
                    <p class="q-title" data-i18n="q1">1. Do you experience slowness of movement (bradykinesia)?</p>
                    <div class="q-options">
                        <label><input type="radio" name="q1" value="0"> <span data-i18n="optno">No</span></label>
                        <label><input type="radio" name="q1" value="1"> <span data-i18n="optsometimes">Sometimes</span></label>
                        <label><input type="radio" name="q1" value="2"> <span data-i18n="optoften">Often</span></label>
                    </div>
                </div>
                <div class="q-card">
                    <p class="q-title" data-i18n="q2">2. Do you have stiffness/rigidity in arms or legs?</p>
                    <div class="q-options">
                        <label><input type="radio" name="q2" value="0"> <span data-i18n="optno">No</span></label>
                        <label><input type="radio" name="q2" value="1"> <span data-i18n="optsometimes">Sometimes</span></label>
                        <label><input type="radio" name="q2" value="2"> <span data-i18n="optoften">Often</span></label>
                    </div>
                </div>
                <div class="q-card">
                    <p class="q-title" data-i18n="q3">3. Do you have balance issues or near falls?</p>
                    <div class="q-options">
                        <label><input type="radio" name="q3" value="0"> <span data-i18n="optno">No</span></label>
                        <label><input type="radio" name="q3" value="1"> <span data-i18n="optsometimes">Sometimes</span></label>
                        <label><input type="radio" name="q3" value="2"> <span data-i18n="optoften">Often</span></label>
                    </div>
                </div>
            </div>
            <div class="test-instruction">
                <div class="instruction-text" data-i18n="questionnote">
                    <strong>Note:</strong> This is a supportive questionnaire and not a diagnosis.
                </div>
            </div>
            <div class="action-section">
                <button class="btn btn-primary btn-block" type="button" id="saveQuestionResults">
                    <i class="fas fa-save"></i>
                    <span data-i18n="questionsave">Save Question Assessment</span>
                </button>
            </div>
            <div class="test-nav-row">
                <button class="btn btn-outline" type="button" id="questionsRetakeBtn">
                    <i class="fas fa-rotate-left"></i> Retake
                </button>
                <button class="btn btn-primary" type="button" id="questionsNextBtn">
                    <i class="fas fa-arrow-right"></i> Next
                </button>
            </div>
        </div>
    </div>
</section>

<!-- SPIRAL VIEW -->
<section class="view" id="spiralView">
    <div class="clinical-card">
        <header class="test-header">
            <h2 data-i18n="spiraltitle">Spiral Tremor Test</h2>
            <p data-i18n="spiralsubtitle">Draw a spiral smoothly using your finger/stylus. Save for later analysis.</p>
        </header>
        <div class="card-content">
            <div class="spiral-wrap">
                <div class="spiral-hint" data-i18n="spiralhint">Use one hand. Try to draw in a single continuous stroke. Keep the phone stable.</div>
                <div class="spiral-canvas-wrap">
                    <canvas id="spiralCanvas"></canvas>
                </div>
            </div>
            <div class="action-section">
                <button class="btn btn-primary btn-block" type="button" id="startSpiralTest">
                    <i class="fas fa-pen-nib"></i>
                    <span data-i18n="spiralstart">Start Drawing</span>
                </button>
                <button class="btn btn-outline btn-block" type="button" id="clearSpiral">
                    <i class="fas fa-eraser"></i>
                    <span data-i18n="spiralclear">Clear</span>
                </button>
                <button class="btn btn-outline btn-block" type="button" id="saveSpiralResults">
                    <i class="fas fa-save"></i>
                    <span data-i18n="spiralsave">Save Spiral</span>
                </button>
            </div>
            <div class="test-instruction">
                <div class="instruction-text" data-i18n="spiralnote">
                    <strong>Clinical Note:</strong> Spiral drawing is a common motor task used to observe tremor and control.
                </div>
            </div>
            <div class="test-nav-row">
                <button class="btn btn-outline" type="button" id="spiralRetakeBtn">
                    <i class="fas fa-rotate-left"></i> Retake
                </button>
                <button class="btn btn-primary" type="button" id="spiralNextBtn">
                    <i class="fas fa-arrow-right"></i> Next
                </button>
            </div>
        </div>
    </div>
</section>

<!-- TREMOR VIEW -->
<section class="view" id="tremorView">
    <div class="clinical-card">
        <header class="test-header">
            <h2>Tremor Screening UPDRS 3.15-18</h2>
            <p>Hold the phone gently on the selected hand, resting on a stable surface. Voice will guide you.</p>
        </header>
        <div class="card-content">
            <div class="precount-wrapper">
                <div class="precount-label"><span>Starting in</span></div>
                <div class="precount-timer" id="tremorPreTimer">3</div>
            </div>
            <div class="timer-large" id="tremorMainTimer">00:20</div>
            <div class="hand-select">
                <button class="btn btn-small active" type="button" id="rightHandBtn">Right Hand</button>
                <button class="btn btn-small" type="button" id="leftHandBtn">Left Hand</button>
            </div>
            <div class="action-section">
                <button class="btn btn-primary btn-block" type="button" id="startTremorTest">
                    <i class="fas fa-wave-square"></i> Start Tremor Capture
                </button>
            </div>
            <div class="metrics-grid compact">
                <div class="metric-card">
                    <div class="metric-label">Frequency Hz</div>
                    <div class="metric-value" id="frequencyValue">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Amplitude mm</div>
                    <div class="metric-value" id="amplitudeValue">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Consistency</div>
                    <div class="metric-value" id="consistencyValue">--</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Tremor Score</div>
                    <div class="metric-value" id="severityScore">--</div>
                </div>
            </div>
            <div class="action-section">
                <button class="btn btn-outline btn-block" type="button" id="saveTremorResults" disabled>
                    <i class="fas fa-save"></i> Save Tremor Screening
                </button>
            </div>
            <div class="test-nav-row">
                <button class="btn btn-outline" type="button" id="tremorRetakeBtn">
                    <i class="fas fa-rotate-left"></i> Retake
                </button>
                <button class="btn btn-primary" type="button" id="tremorNextBtn">
                    <i class="fas fa-arrow-right"></i> Next
                </button>
            </div>
        </div>
    </div>
</section>

<!-- RESULTS VIEW -->
<section class="view" id="resultsView">
    <div class="clinical-card">
        <header class="test-header">
            <h2 data-i18n="navresults">Screening Results</h2>
            <p>Radar summary of domain scores 0-4. Higher is worse.</p>
        </header>
        <div class="card-content">
            <div class="results-layout">
                <div class="radar-card" id="radarCard">
                    <div class="radar-header">
                        <div class="radar-title">Digital Motor Radar</div>
                        <div class="radar-subtitle">Speech, Tremor, Gait, Facial, Questions, Spiral</div>
                    </div>
                    <div class="radar-canvas-wrap">
                        <canvas id="radarChartCanvas"></canvas>
                    </div>
                    <div class="radar-actions">
                        <button class="btn btn-outline" type="button" id="downloadRadarPng">
                            <i class="fas fa-image"></i> Download PNG
                        </button>
                        <button class="btn btn-outline" type="button" id="downloadRadarPdf">
                            <i class="fas fa-file-pdf"></i> Download PDF
                        </button>
                    </div>
                </div>
                <div class="summary-card">
                    <h3>Domain Scores</h3>
                    <div class="results-table-wrapper">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Domain</th>
                                    <th>Status</th>
                                    <th>Score</th>
                                    <th>Comment</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTableBody"></tbody>
                        </table>
                    </div>
                    <div class="clinical-impression-section">
                        <h3>Overall Impression</h3>
                        <div id="overallRisk" class="risk-indicator risk-low">
                            <i class="fas fa-info-circle"></i>
                            <span>Incomplete‚Äîmore tests needed</span>
                        </div>
                        <div id="clinicalImpression">
                            <p>Complete all tests to generate an aggregated impression.</p>
                        </div>
                    </div>
                    <div class="action-section">
                        <button class="btn btn-primary btn-block" type="button" data-view="report" id="goToReportBtn" disabled>
                            <i class="fas fa-file-medical-alt"></i> View/Download Summary
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- REPORT VIEW -->
<section class="view" id="reportView">
    <div class="clinical-card">
        <header class="test-header">
            <h2 data-i18n="navreport">Download Summary</h2>
            <p>Export radar chart and screening details as PDF (prototype only, for demo).</p>
        </header>
        <div class="card-content">
            <h3>Patient Snapshot</h3>
            <div id="reportPatientInfo">
                <p>No patient information available.</p>
            </div>
            <h3>Summary of Screening</h3>
            <div id="reportSummary">
                <p>Complete assessments and generate report to view summary.</p>
            </div>
            <div class="action-section">
                <button class="btn btn-primary btn-block" type="button" id="generateReport">
                    <i class="fas fa-file-pdf"></i> Generate & Download PDF
                </button>
            </div>
        </div>
    </div>
</section>

</main>

<!-- SCRIPTS: NO mediapipe_init.js - assessment.js handles ALL MediaPipe -->
<script src="language.js" defer></script>
<script src="assessment.js" defer></script>

</body>
</html>
