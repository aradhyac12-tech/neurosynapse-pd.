<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f0f23">
    <title>NeuroSynapse-PD | Clinical Assessment</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%230ea5e9'/><path d='M50 30v40M30 50h40' stroke='white' stroke-width='4'/></svg>">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- SPLASH SCREEN -->
<div class="splash-screen" id="splashScreen">
    <div class="splash-logo">ğŸ§ </div>
    <h1 class="splash-title">NeuroSynapse-PD</h1>
    <p class="splash-subtitle">Clinical Assessment Suite</p>
    <div class="splash-progress-container">
        <div class="splash-progress">
            <div class="splash-progress-bar" id="splashProgress"></div>
        </div>
    </div>
</div>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="nav-brand">
        <div style="font-size: 1.8rem; display: flex; align-items: center; justify-content: center; width: 48px; height: 48px; background: rgba(14, 165, 233, 0.2); border-radius: 12px; color: #0ea5e9;">ğŸ§ </div>
        <div class="nav-title-group">
            <div class="nav-title">NeuroSynapse-PD</div>
            <div class="nav-version">v2.6 Beta</div>
        </div>
    </div>

    <div class="nav-right">
        <!-- Language Selector -->
        <div class="language-selector">
            <span style="font-size: 1.1rem;">ğŸŒ</span>
            <span id="currentLanguageLabel">English</span>
            <select id="topLanguageSelect" class="language-select" style="opacity: 0; position: absolute; width: 0; height: 0;">
                <option value="en">English</option>
                <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <!-- Voice Toggle -->
        <button id="voiceToggle" class="toggle-btn active" aria-label="Toggle voice assistant" style="margin: 0 1rem;">
            ğŸ”Š
        </button>

        <!-- Menu Toggle -->
        <button id="menuToggle" class="menu-toggle">
            â˜°
        </button>
    </div>
</nav>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h2 class="sidebar-title">ğŸ—‚ï¸ Navigation</h2>
        <p class="sidebar-subtitle">Clinical Screening Modules</p>
        <button id="sidebarBack" class="sidebar-back" aria-label="Close sidebar">âœ•</button>
    </div>

    <div class="sidebar-scroll">
        <!-- Dashboard -->
        <div class="nav-section">
            <div class="section-label">ğŸ“Š Main</div>
            <div class="nav-item active" data-view="dashboard">
                <span class="nav-icon">ğŸ“ˆ</span>
                <span data-i18n="navdashboard">Clinical Dashboard</span>
            </div>
        </div>

        <!-- Information -->
        <div class="nav-section">
            <div class="section-label">ğŸ“– Learn</div>
            <div class="nav-item" data-view="info">
                <span class="nav-icon">â„¹ï¸</span>
                <span data-i18n="navinfo">PD Information</span>
            </div>
            <div class="nav-item" data-view="patient">
                <span class="nav-icon">ğŸ‘¤</span>
                <span data-i18n="navpatient">Patient Profile</span>
            </div>
        </div>

        <!-- Screening Tests -->
        <div class="nav-section">
            <div class="section-label">ğŸ”¬ Screening</div>
            <div class="nav-item disabled" data-view="voice">
                <span class="nav-icon">ğŸ¤</span>
                <span data-i18n="navvoice">Speech 3.1</span>
                <span class="nav-badge">LOCKED</span>
            </div>
            <div class="nav-item disabled" data-view="tremor">
                <span class="nav-icon">ğŸ“³</span>
                <span data-i18n="navtremor">Tremor 3.15-18</span>
                <span class="nav-badge">LOCKED</span>
            </div>
            <div class="nav-item disabled" data-view="gait">
                <span class="nav-icon">ğŸš¶</span>
                <span data-i18n="navgait">Gait 3.10-11</span>
                <span class="nav-badge">LOCKED</span>
            </div>
            <div class="nav-item disabled" data-view="facial">
                <span class="nav-icon">ğŸ˜Š</span>
                <span data-i18n="navfacial">Facial 3.2</span>
                <span class="nav-badge">LOCKED</span>
            </div>
            <div class="nav-item disabled" data-view="questions">
                <span class="nav-icon">â“</span>
                <span data-i18n="navquestions">Question Assessment</span>
                <span class="nav-badge">LOCKED</span>
            </div>
            <div class="nav-item disabled" data-view="spiral">
                <span class="nav-icon">ğŸŒ€</span>
                <span data-i18n="navspiral">Spiral Tremor</span>
                <span class="nav-badge">LOCKED</span>
            </div>
        </div>

        <!-- Results -->
        <div class="nav-section">
            <div class="section-label">ğŸ“‹ Results</div>
            <div class="nav-item disabled" data-view="results">
                <span class="nav-icon">ğŸ“Š</span>
                <span data-i18n="navresults">Screening Results</span>
            </div>
            <div class="nav-item disabled" data-view="report">
                <span class="nav-icon">ğŸ“„</span>
                <span data-i18n="navreport">Download Summary</span>
            </div>
        </div>
    </div>

    <div class="sidebar-footer">
        <p class="sidebar-credits">
            <span>Created by <strong>Aradhya Chavan</strong></span>
        </p>
    </div>
</aside>

<!-- MAIN CONTENT -->
<main class="main-content">

    <!-- DASHBOARD VIEW -->
    <div class="view active" id="dashboardView">
        <div class="clinical-card">
            <div class="test-header">
                <h2 data-i18n="dashtitle">Clinical Assessment Dashboard</h2>
                <p data-i18n="dashsubtitle">MDS-UPDRS Part III digital screening summary</p>
            </div>
            <div class="card-content">
                <div class="dashboard-grid">
                    <!-- Patient Profile Card -->
                    <div class="info-point">
                        <div class="point-icon">ğŸ‘¤</div>
                        <h3 data-i18n="dashpatienttitle">Patient Profile</h3>
                        <p data-i18n="dashpatientdesc">Complete demographic and contact details.</p>
                        <button class="btn btn-primary" data-view="patient">
                            <span data-i18n="completeprofile">Complete Profile</span>
                        </button>
                        <div id="patientStatus" class="status-badge status-pending" style="margin-top: 1rem;">
                            <span data-i18n="dashstatusrequired">Required</span>
                        </div>
                    </div>

                    <!-- Screening Tests Card -->
                    <div class="info-point">
                        <div class="point-icon">ğŸ”¬</div>
                        <h3 data-i18n="dashscreeningtitle">Screening Tests</h3>
                        <p data-i18n="dashscreeningdesc">Speech, tremor, gait and facial expression.</p>
                        <div class="screening-count" style="margin: 1rem 0; font-size: 2rem; font-weight: 800; color: var(--primary);">
                            <span id="screeningStatus">0</span>/6
                        </div>
                        <button class="btn btn-secondary" data-view="voice" style="opacity: 0.5; cursor: not-allowed;">
                            <span data-i18n="testslocked">Tests Locked</span>
                        </button>
                    </div>

                    <!-- Results Card -->
                    <div class="info-point">
                        <div class="point-icon">ğŸ“Š</div>
                        <h3 data-i18n="dashreporttitle">Radar Summary</h3>
                        <p data-i18n="dashreportdesc">Downloadable radar chart with domain scores.</p>
                        <button class="btn btn-secondary" id="goToReportBtn" data-view="report" disabled style="opacity: 0.5; cursor: not-allowed;">
                            <span data-i18n="generatereport">Generate Report</span>
                        </button>
                        <div id="reportStatus" class="status-badge status-pending" style="margin-top: 1rem;">
                            <span data-i18n="completealltests">Complete All Tests</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- INFO VIEW -->
    <div class="view" id="infoView">
        <div class="clinical-card">
            <div class="test-header">
                <h2 data-i18n="infotitle">Parkinson's Disease Information</h2>
                <p data-i18n="infosubtitle">Clinical background and MDS-UPDRS Part III protocol</p>
            </div>
            <div class="card-content">
                <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid rgba(14, 165, 233, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                    <h3 data-i18n="infopdtitle" style="margin-top: 0; color: #0ea5e9;">What is Parkinson's?</h3>
                    <p data-i18n="infopdtext" style="margin: 0; line-height: 1.8;">Progressive neurodegenerative disorder with tremor, bradykinesia, rigidity and postural instability.</p>
                </div>

                <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                    <h3 data-i18n="infoupdrstitle" style="margin-top: 0; color: #10b981;">MDS-UPDRS Part III Assessment</h3>
                    <p data-i18n="infoupdrstext" style="margin: 0; line-height: 1.8;">Motor examination with 18 items scored 0â€“4 (0 = normal, 4 = severe).</p>
                </div>

                <div style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                    <h3 data-i18n="infobiomarkertitle" style="margin-top: 0; color: #fbbf24;">Digital Biomarkers</h3>
                    <p data-i18n="infobiomarkertext" style="margin: 0; line-height: 1.8;">Speech, tremor, gait and facial metrics captured as objective digital signatures.</p>
                </div>

                <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                    <p data-i18n="infonote" style="margin: 0; font-size: 0.95rem; line-height: 1.6; color: var(--text-secondary);"></p>
                </div>

                <button class="btn btn-primary btn-block" data-view="patient" style="margin-top: 2rem;">
                    <span data-i18n="infonext">Proceed to Patient Contact Information</span>
                </button>
            </div>
        </div>
    </div>

    <!-- PATIENT VIEW -->
    <div class="view" id="patientView">
        <div class="clinical-card">
            <div class="test-header">
                <h2 data-i18n="patienttitle">Patient Demographic & Contact Information</h2>
                <p data-i18n="patientsubtitle">Required for documentation before screening</p>
            </div>
            <div class="card-content">
                <form id="patientForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="firstName" data-i18n="labelfirstname">First Name</label>
                            <input type="text" id="firstName" class="form-control" required placeholder="John">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="lastName" data-i18n="labellastname">Last Name</label>
                            <input type="text" id="lastName" class="form-control" required placeholder="Doe">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="dateOfBirth" data-i18n="labeldob">Date of Birth</label>
                            <input type="date" id="dateOfBirth" class="form-control" required>
                            <div id="ageWarning" class="form-hint" style="color: #ef4444; display: none;" data-i18n="agewarning">âš ï¸ Patient must be 18 years or older</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="gender" data-i18n="labelgender">Gender</label>
                            <select id="gender" class="form-control" required>
                                <option value="" data-i18n="genderselect">Select Gender</option>
                                <option value="male" data-i18n="gendermale">Male</option>
                                <option value="female" data-i18n="genderfemale">Female</option>
                                <option value="other" data-i18n="genderother">Other</option>
                                <option value="na" data-i18n="genderna">Prefer not to say</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="countryCode" data-i18n="labelcountry">Country Code</label>
                            <select id="countryCode" class="form-control" required>
                                <option value="">Select Country</option>
                                <option value="+1">ğŸ‡ºğŸ‡¸ +1 (USA)</option>
                                <option value="+44">ğŸ‡¬ğŸ‡§ +44 (UK)</option>
                                <option value="+91">ğŸ‡®ğŸ‡³ +91 (India)</option>
                                <option value="+86">ğŸ‡¨ğŸ‡³ +86 (China)</option>
                                <option value="+81">ğŸ‡¯ğŸ‡µ +81 (Japan)</option>
                                <option value="+49">ğŸ‡©ğŸ‡ª +49 (Germany)</option>
                                <option value="+33">ğŸ‡«ğŸ‡· +33 (France)</option>
                                <option value="+39">ğŸ‡®ğŸ‡¹ +39 (Italy)</option>
                                <option value="+34">ğŸ‡ªğŸ‡¸ +34 (Spain)</option>
                                <option value="+7">ğŸ‡·ğŸ‡º +7 (Russia)</option>
                                <option value="+55">ğŸ‡§ğŸ‡· +55 (Brazil)</option>
                                <option value="+61">ğŸ‡¦ğŸ‡º +61 (Australia)</option>
                                <option value="+65">ğŸ‡¸ğŸ‡¬ +65 (Singapore)</option>
                                <option value="+852">ğŸ‡­ğŸ‡° +852 (Hong Kong)</option>
                                <option value="+60">ğŸ‡²ğŸ‡¾ +60 (Malaysia)</option>
                                <option value="+66">ğŸ‡¹ğŸ‡­ +66 (Thailand)</option>
                                <option value="+84">ğŸ‡»ğŸ‡³ +84 (Vietnam)</option>
                                <option value="+62">ğŸ‡®ğŸ‡© +62 (Indonesia)</option>
                                <option value="+63">ğŸ‡µğŸ‡­ +63 (Philippines)</option>
                                <option value="+64">ğŸ‡³ğŸ‡¿ +64 (New Zealand)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="phoneNumber" data-i18n="labelphone">Phone Number</label>
                            <input type="tel" id="phoneNumber" class="form-control" placeholder="9876543210">
                            <div class="form-hint" data-i18n="hintphone">Enter digits only, without country code</div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="email" data-i18n="labelemail">Email Address</label>
                            <input type="email" id="email" class="form-control" placeholder="patient@example.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="medicalId" data-i18n="labelmedicalid">Medical Record Number</label>
                            <input type="text" id="medicalId" class="form-control" placeholder="MRN-2024-001">
                        </div>
                    </div>

                    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                        <p data-i18n="patientnote" style="margin: 0; font-size: 0.95rem; line-height: 1.6; color: var(--text-secondary);"></p>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        <span data-i18n="patientsave">Save & Unlock Screening</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- VOICE VIEW -->
    <div class="view" id="voiceView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>ğŸ¤ <span data-i18n="voicetitle">Speech Assessment (UPDRS 3.1)</span></h2>
                <p data-i18n="voicesubtitle">Record 3 trials of sustained phonation (AAAAA)</p>
            </div>
            <div class="card-content">
                <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid rgba(14, 165, 233, 0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                    <p style="margin: 0; font-size: 0.95rem; line-height: 1.6;"><span data-i18n="voiceinstructions1">Say</span> <strong>"AAAAA"</strong> <span data-i18n="voiceinstructions2">clearly for approximately 8 seconds. Silence in environment helps capture quality voice samples.</span></p>
                </div>

                <div class="metrics-grid">
                    <!-- Trial 1 -->
                    <div style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ™ï¸ <span data-i18n="trial">Trial</span> 1</div>
                        <button id="voiceTrial1Btn" class="btn btn-primary btn-block" style="margin-bottom: 0.75rem;"><span data-i18n="recordtrial">Record Trial 1</span></button>
                        <button id="voiceTrial1Play" class="btn btn-secondary btn-block" disabled style="margin-bottom: 0.75rem;">â–¶ <span data-i18n="playback">Playback</span></button>
                        <div id="voiceTrial1Status" class="status-badge status-pending">Pending</div>
                        <canvas id="voiceWave1" style="width: 100%; height: 50px; margin-top: 1rem; background: rgba(0,0,0,0.2); border-radius: 6px;"></canvas>
                    </div>

                    <!-- Trial 2 -->
                    <div style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ™ï¸ <span data-i18n="trial">Trial</span> 2</div>
                        <button id="voiceTrial2Btn" class="btn btn-primary btn-block" style="margin-bottom: 0.75rem;"><span data-i18n="recordtrial">Record Trial 2</span></button>
                        <button id="voiceTrial2Play" class="btn btn-secondary btn-block" disabled style="margin-bottom: 0.75rem;">â–¶ <span data-i18n="playback">Playback</span></button>
                        <div id="voiceTrial2Status" class="status-badge status-pending">Pending</div>
                        <canvas id="voiceWave2" style="width: 100%; height: 50px; margin-top: 1rem; background: rgba(0,0,0,0.2); border-radius: 6px;"></canvas>
                    </div>

                    <!-- Trial 3 -->
                    <div style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 1rem;">ğŸ™ï¸ <span data-i18n="trial">Trial</span> 3</div>
                        <button id="voiceTrial3Btn" class="btn btn-primary btn-block" style="margin-bottom: 0.75rem;"><span data-i18n="recordtrial">Record Trial 3</span></button>
                        <button id="voiceTrial3Play" class="btn btn-secondary btn-block" disabled style="margin-bottom: 0.75rem;">â–¶ <span data-i18n="playback">Playback</span></button>
                        <div id="voiceTrial3Status" class="status-badge status-pending">Pending</div>
                        <canvas id="voiceWave3" style="width: 100%; height: 50px; margin-top: 1rem; background: rgba(0,0,0,0.2); border-radius: 6px;"></canvas>
                    </div>
                </div>

                <!-- Timers -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 2rem 0; text-align: center;">
                    <div>
                        <p style="color: var(--text-muted); margin: 0 0 0.5rem 0;" data-i18n="prerecording">Pre-Recording</p>
                        <div id="voicePreTimer" style="font-size: 2rem; font-weight: 800; color: var(--primary);">3</div>
                    </div>
                    <div>
                        <p style="color: var(--text-muted); margin: 0 0 0.5rem 0;" data-i18n="recordingtime">Recording Time</p>
                        <div id="voiceMainTimer" style="font-size: 2rem; font-weight: 800; color: var(--warning);">00:00</div>
                    </div>
                </div>

                <!-- Metrics Table -->
                <div style="margin: 2rem 0;">
                    <h3 style="margin-top: 0;" data-i18n="voicemetrics">Jitter & Metrics Alignment</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; margin-bottom: 2rem;">
                            <thead>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;"><span data-i18n="trial">Trial</span></th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;"><span data-i18n="jitter">Jitter (%)</span></th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;"><span data-i18n="shimmer">Shimmer (dB)</span></th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;"><span data-i18n="hnr">HNR (dB)</span></th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;"><span data-i18n="duration">Duration (s)</span></th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;"><span data-i18n="f0">F0 (Hz)</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr id="voiceMetricsRow1" style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);"><span data-i18n="trial">Trial</span> 1</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                </tr>
                                <tr id="voiceMetricsRow2" style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);"><span data-i18n="trial">Trial</span> 2</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                </tr>
                                <tr id="voiceMetricsRow3">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);"><span data-i18n="trial">Trial</span> 3</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                    <td style="padding: 0.75rem;">â€”</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button id="saveVoiceResults" class="btn btn-success" style="flex: 1;">
                        âœ“ <span data-i18n="savecontinue">Save & Continue</span>
                    </button>
                    <button class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                        <span data-i18n="backtodash">Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- TREMOR VIEW -->
    <div class="view" id="tremorView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>ğŸ“³ <span data-i18n="tremortitle">Tremor Assessment (UPDRS 3.15-18)</span></h2>
                <p data-i18n="tremorsubtitle">DeviceMotion capture for resting tremor detection</p>
            </div>
            <div class="card-content">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                    <div>
                        <h3 style="margin-top: 0;" data-i18n="selecthand">Select Hand</h3>
                        <div class="hand-select">
                            <button id="tremorLeftBtn" class="btn btn-secondary" data-hand="left" style="flex: 1;">
                                ğŸ‘ˆ <span data-i18n="lefthand">Left Hand</span>
                            </button>
                            <button id="tremorRightBtn" class="btn btn-primary" data-hand="right" style="flex: 1;">
                                <span data-i18n="righthand">Right Hand</span> ğŸ‘‰
                            </button>
                        </div>
                    </div>
                    <div>
                        <h3 style="margin-top: 0;" data-i18n="recordingstatus">Recording Status</h3>
                        <div style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; text-align: center;">
                            <div id="tremorTimer" style="font-size: 2.5rem; font-weight: 800; color: var(--warning); margin-bottom: 1rem;">00:00</div>
                            <button id="tremorStartBtn" class="btn btn-primary btn-block">
                                ğŸ”´ <span data-i18n="startrecording">Start Recording</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Metrics Table -->
                <div style="margin: 2rem 0;">
                    <h3 style="margin-top: 0;" data-i18n="tremormetrics">Tremor Metrics & Analysis</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="metric">Metric</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="value">Value</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="unit">Unit</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="severity">Severity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="frequency">Frequency</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="freqVal">â€”</td>
                                    <td style="padding: 0.75rem;">Hz</td>
                                    <td style="padding: 0.75rem;"><span id="freqSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="amplitude">Amplitude</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="ampVal">â€”</td>
                                    <td style="padding: 0.75rem;">m/sÂ²</td>
                                    <td style="padding: 0.75rem;"><span id="ampSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="power">Power</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="powVal">â€”</td>
                                    <td style="padding: 0.75rem;">dB</td>
                                    <td style="padding: 0.75rem;"><span id="powSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button id="saveTremorResults" class="btn btn-success" style="flex: 1;">
                        âœ“ <span data-i18n="savecontinue">Save & Continue</span>
                    </button>
                    <button class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                        <span data-i18n="backtodash">Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- GAIT VIEW -->
    <div class="view" id="gaitView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>ğŸš¶ <span data-i18n="gaittitle">Gait Assessment (UPDRS 3.10-11)</span></h2>
                <p data-i18n="gaitsubtitle">Pose tracking and cadence analysis</p>
            </div>
            <div class="card-content">
                <div style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“¹</div>
                    <p style="margin: 0 0 1.5rem 0; color: var(--text-secondary);" data-i18n="gaitinstructions">Position camera to capture full body. Walk naturally for 15 seconds.</p>
                    <button id="gaitStartBtn" class="btn btn-primary">
                        ğŸ¥ <span data-i18n="startgait">Start Gait Recording</span>
                    </button>
                </div>

                <!-- Metrics Table -->
                <div style="margin: 2rem 0;">
                    <h3 style="margin-top: 0;" data-i18n="gaitmetrics">Gait Metrics & Kinematic Analysis</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="metric">Metric</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="value">Value</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="status">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="cadence">Cadence</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="cadVal">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="cadSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="stridelength">Stride Length</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="strVal">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="strSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="gaitspeed">Gait Speed</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="spdVal">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="spdSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button id="saveGaitResults" class="btn btn-success" style="flex: 1;">
                        âœ“ <span data-i18n="savecontinue">Save & Continue</span>
                    </button>
                    <button class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                        <span data-i18n="backtodash">Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- FACIAL VIEW -->
    <div class="view" id="facialView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>ğŸ˜Š <span data-i18n="facialtitle">Facial Expression (UPDRS 3.2)</span></h2>
                <p data-i18n="facialsubtitle">Face mesh analysis and expression assessment</p>
            </div>
            <div class="card-content">
                <div style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“·</div>
                    <p style="margin: 0 0 1.5rem 0; color: var(--text-secondary);" data-i18n="facialinstructions">Position face clearly in frame. Maintain natural expression for 10 seconds.</p>
                    <button id="facialStartBtn" class="btn btn-primary">
                        ğŸ“± <span data-i18n="startfacial">Start Facial Recording</span>
                    </button>
                </div>

                <!-- Metrics Table -->
                <div style="margin: 2rem 0;">
                    <h3 style="margin-top: 0;" data-i18n="facialmetrics">Facial Expression Metrics</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="metric">Metric</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="value">Value</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="status">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="blinkrate">Blink Rate</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="blkVal">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="blkSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="jawopening">Jaw Opening</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="jawVal">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="jawSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="mouthwidth">Mouth Width</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="mthVal">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="mthSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button id="saveFacialResults" class="btn btn-success" style="flex: 1;">
                        âœ“ <span data-i18n="savecontinue">Save & Continue</span>
                    </button>
                    <button class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                        <span data-i18n="backtodash">Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- QUESTIONS VIEW -->
    <div class="view" id="questionsView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>â“ <span data-i18n="questionstitle">Question-Based Assessment</span></h2>
                <p data-i18n="questionssubtitle">Clinical context supporting items</p>
            </div>
            <div class="card-content">
                <form id="questionsForm">
                    <!-- Question 1 -->
                    <div style="margin-bottom: 2.5rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border);">
                        <label class="form-label" data-i18n="q1">1) Do you experience slowness of movement?</label>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q1" value="0" required style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optno">No</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q1" value="1" style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optsometimes">Sometimes</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q1" value="2" style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optoften">Often</span>
                            </label>
                        </div>
                    </div>

                    <!-- Question 2 -->
                    <div style="margin-bottom: 2.5rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border);">
                        <label class="form-label" data-i18n="q2">2) Do you have stiffness/rigidity?</label>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q2" value="0" required style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optno">No</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q2" value="1" style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optsometimes">Sometimes</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q2" value="2" style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optoften">Often</span>
                            </label>
                        </div>
                    </div>

                    <!-- Question 3 -->
                    <div style="margin-bottom: 2.5rem;">
                        <label class="form-label" data-i18n="q3">3) Do you have balance issues?</label>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q3" value="0" required style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optno">No</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q3" value="1" style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optsometimes">Sometimes</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="q3" value="2" style="width: 18px; height: 18px; cursor: pointer;">
                                <span data-i18n="optoften">Often</span>
                            </label>
                        </div>
                    </div>

                    <div style="background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                        <p data-i18n="questionnote" style="margin: 0; font-size: 0.95rem; line-height: 1.6;"></p>
                    </div>

                    <!-- Action Buttons -->
                    <div style="display: flex; gap: 1rem;">
                        <button type="submit" class="btn btn-primary" style="flex: 1;">
                            âœ“ <span data-i18n="savecontinue">Save & Continue</span>
                        </button>
                        <button type="button" class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                            <span data-i18n="backtodash">Back to Dashboard</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- SPIRAL VIEW -->
    <div class="view" id="spiralView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>ğŸŒ€ <span data-i18n="spiraltitle">Spiral Tremor Test</span></h2>
                <p data-i18n="spiralsubtitle">Draw a smooth spiral using your finger</p>
            </div>
            <div class="card-content">
                <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid rgba(14, 165, 233, 0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                    <p style="margin: 0; font-size: 0.95rem; line-height: 1.6;" data-i18n="spiralinstruction">Use one hand. Try to draw in a single continuous stroke. Keep the device stable.</p>
                </div>

                <canvas id="spiralCanvas" style="border: 2px solid var(--border); border-radius: 12px; width: 100%; background: rgba(0,0,0,0.2); margin-bottom: 1.5rem; display: block; touch-action: none;"></canvas>

                <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                    <button id="spiralClearBtn" class="btn btn-secondary" style="flex: 1;">
                        ğŸ—‘ï¸ <span data-i18n="clear">Clear</span>
                    </button>
                    <button id="spiralSaveBtn" class="btn btn-success" style="flex: 1;">
                        âœ“ <span data-i18n="savespiral">Save Spiral</span>
                    </button>
                </div>

                <!-- Metrics Table -->
                <div style="margin: 2rem 0;">
                    <h3 style="margin-top: 0;" data-i18n="spiralmetrics">Spiral Analysis Metrics</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="metric">Metric</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="value">Value</th>
                                    <th style="text-align: left; padding: 0.75rem; color: var(--text-secondary); font-weight: 600;" data-i18n="status">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="tremorindex">Tremor Index</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="treIdx">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="treIdxSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid var(--border);">
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="pathlength">Path Length</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="pathLen">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="pathSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.75rem; color: var(--text-secondary);" data-i18n="velocity">Velocity</td>
                                    <td style="padding: 0.75rem; font-weight: 600;" id="velVal">â€”</td>
                                    <td style="padding: 0.75rem;"><span id="velSev" class="status-badge status-pending">Pending</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                        <span data-i18n="backtodash">Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- RESULTS VIEW -->
    <div class="view" id="resultsView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>ğŸ“Š <span data-i18n="resultstitle">Screening Results Summary</span></h2>
                <p data-i18n="resultssubtitle">Compiled metrics from all assessments</p>
            </div>
            <div class="card-content">
                <div style="overflow-x: auto; margin-bottom: 2rem;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid var(--border);">
                                <th style="text-align: left; padding: 1rem; color: var(--text-primary); font-weight: 700; background: rgba(14, 165, 233, 0.1);" data-i18n="domain">Domain</th>
                                <th style="text-align: left; padding: 1rem; color: var(--text-primary); font-weight: 700; background: rgba(14, 165, 233, 0.1);" data-i18n="status">Status</th>
                                <th style="text-align: left; padding: 1rem; color: var(--text-primary); font-weight: 700; background: rgba(14, 165, 233, 0.1);" data-i18n="score">Score (0-4)</th>
                                <th style="text-align: left; padding: 1rem; color: var(--text-primary); font-weight: 700; background: rgba(14, 165, 233, 0.1);" data-i18n="comment">Clinical Comment</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody">
                            <!-- Dynamically populated -->
                        </tbody>
                    </table>
                </div>

                <!-- Overall Impression -->
                <div style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                    <h3 style="margin-top: 0;" data-i18n="overallimpression">Overall Impression</h3>
                    <div id="riskIndicator" style="font-size: 1.3rem; font-weight: 700; margin: 1rem 0;">Complete all tests to generate aggregated impression.</div>
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 1rem;">
                    <button class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                        <span data-i18n="backtodash">Back to Dashboard</span>
                    </button>
                    <button class="btn btn-primary" data-view="report" style="flex: 1;">
                        ğŸ“„ <span data-i18n="generatereport">Generate Report</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- REPORT VIEW -->
    <div class="view" id="reportView">
        <div class="clinical-card">
            <div class="test-header">
                <h2>ğŸ“„ <span data-i18n="reporttitle">Clinical Summary Report</span></h2>
                <p data-i18n="reportsubtitle">Comprehensive screening documentation</p>
            </div>
            <div class="card-content">
                <div id="reportContent" style="background: var(--bg-glass); border: 1px solid var(--border); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; line-height: 1.8;">
                    <!-- Dynamically populated -->
                </div>

                <!-- Action Buttons -->
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button id="downloadPdfBtn" class="btn btn-success" style="flex: 1;">
                        â¬‡ï¸ <span data-i18n="downloadpdf">Download PDF</span>
                    </button>
                    <button id="downloadJsonBtn" class="btn btn-secondary" style="flex: 1;">
                        â¬‡ï¸ <span data-i18n="exportjson">Export JSON</span>
                    </button>
                    <button class="btn btn-secondary" data-view="dashboard" style="flex: 1;">
                        <span data-i18n="backtodash">Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

</main>

<!-- Scripts -->
<script src="language.js"></script>
<script src="mediapipe_init.js"></script>
<script src="assessment.js"></script>

</body>
</html>